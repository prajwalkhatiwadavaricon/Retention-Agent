# Varicon Retention Agent - Architecture

## System Flow

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│  DATA SOURCES                                                                       │
│  ┌──────────────┐  ┌──────────────┐                                                 │
│  │  Usage Data  │  │ JIRA Tickets │                                                 │
│  └──────┬───────┘  └──────┬───────┘                                                 │
│         └────────┬────────┘                                                         │
└──────────────────┼──────────────────────────────────────────────────────────────────┘
                   ▼
┌──────────────────────────────────────────────────────────────────────────────────────┐
│  WORKFLOW                                                                            │
│                                                                                      │
│  ┌───────┐      ┌─────────────┐      ┌─────────────┐      ┌─────────────┐            │ 
│  │ START │─────▶│  ANALYSIS   │─────▶│   EMAIL     │─────▶│     END     │            │
│  │       │      │   AGENT     │      │   AGENT     │      │             │            │
│  └───┬───┘      │ (Risk Score)│      │ (Alerts)    │      └─────────────┘            │
│      │          └─────────────┘      └─────────────┘                                 │
│      │                                                                               │
│      │                                                                               │
│      │          ┌─────────────┐      ┌─────-───────┐                                 │
│      └─────────▶│    RAG      │─────▶│  ChromaDB   │─────▶ Chatbot                   │
│                 │   AGENT     │      │ (Vector DB) │                                 │
│                 └─────────────┘      └─────────────┘                                 │
└──────────────────────────────────────────────────────────────────────────────────────┘
                                      │
                                      ▼
┌──────────────────────────────────────────────────────────────────────────────────────┐
│  OUTPUTS                                                                             │
│  ┌──────────────┐    ┌──────────────┐    ┌──────────────┐                            │
│  │ Risk Report  │    │ Email Alerts │    │ Chatbot      │                            │
│  └──────────────┘    └──────────────┘    └──────────────┘                            │
└──────────────────────────────────────────────────────────────────────────────────────┘
```

## API Query Flow

```
┌────────────┐      ┌────────────┐      ┌────────────┐      ┌────────────┐
│   Client   │─────▶│  FastAPI   │─────▶│  ChromaDB  │─────▶│  Gemini    │─────▶ Response
│  Request   │      │   Server   │      │   Search   │      │    LLM     │
└────────────┘      └────────────┘      └────────────┘      └────────────┘
```

## Tech Stack

| LLM | Vector DB | Workflow | API | Email |
|-----|-----------|----------|-----|-------|
| Google Gemini | ChromaDB | LangGraph | FastAPI | Gmail SMTP |
